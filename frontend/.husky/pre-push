#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

declare IS_FRONTEND_FOLDER_CHANGE=$(git show --name-only -r --stat --oneline HEAD^^..HEAD | grep 'frontend/')

if [[ $IS_FRONTEND_FOLDER_CHANGE ]]; then
    echo '🏛🏛🏛🏛... Before push, Trying to build now. 🏛🏛🏛🏛'

    cd frontend

    npm run build ||
    (
        echo '❌👷🔨❌ Better call Bob... Because your build failed ❌👷🔨❌
                Next build failed: View the errors above to see why.
        '
        false;
    )

    echo '✅✅✅✅ You win this time... I am pushing this now. ✅✅✅✅'
fi